import{c as W,g as G,s as C,A as oe,C as ae,r as h,K as re,a4 as Z,j as o,e as E,v as x,f as H,p as R,d as ee,a5 as se,T as _,G as J,x as ie,y as ne,z as le,u as ce,B,k as T,_ as Q,I as de,P as pe}from"./index-OMC2sU8i.js";import{p as ue,M as he}from"./Markdown-BKR_nDSL.js";import{H as me}from"./Help-DktkJNBm.js";import{M as fe}from"./MessageBox-DTGF7l43.js";import{H as ge}from"./HighlightEditor-DoUzWDS0.js";import{u as be}from"./useSlot-DAQ2xFkZ.js";import{A as Y}from"./Alert--gx_7eZ9.js";import{C as xe}from"./CircularProgress-BMMKehZz.js";import"./index-DJzu6EK2.js";import"./Chip-DZIZpNJR.js";import"./Link-BCXULTOz.js";import"./Divider-ChOTE1E2.js";import"./dividerClasses-_aQeWJJF.js";import"./TableRow-BgpdClSi.js";import"./Dialog-BLYPEFnt.js";import"./Modal-C6EAV6LK.js";import"./AlertTitle-DxdK8Vmo.js";import"./Close-DemOZ5P1.js";function we(e){return W("PrivateSwitchBase",e)}G("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ke=e=>{const{classes:t,checked:a,disabled:s,edge:i}=e,l={root:["root",a&&"checked",s&&"disabled",i&&`edge${x(i)}`],input:["input"]};return H(l,we,t)},ve=C(oe)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),ye=C("input",{shouldForwardProp:ae})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ce=h.forwardRef(function(t,a){const{autoFocus:s,checked:i,checkedIcon:l,className:d,defaultChecked:c,disabled:m,disableFocusRipple:w=!1,edge:p=!1,icon:r,id:u,inputProps:k,inputRef:X,name:N,onBlur:z,onChange:L,onFocus:U,readOnly:D,required:$=!1,tabIndex:I,type:v,value:P,...q}=t,[S,F]=re({controlled:i,default:!!c,name:"SwitchBase",state:"checked"}),f=Z(),A=b=>{U&&U(b),f&&f.onFocus&&f.onFocus(b)},j=b=>{z&&z(b),f&&f.onBlur&&f.onBlur(b)},y=b=>{if(b.nativeEvent.defaultPrevented)return;const V=b.target.checked;F(V),L&&L(b,V)};let g=m;f&&typeof g>"u"&&(g=f.disabled);const te=v==="checkbox"||v==="radio",O={...t,checked:S,disabled:g,disableFocusRipple:w,edge:p},K=ke(O);return o.jsxs(ve,{component:"span",className:E(K.root,d),centerRipple:!0,focusRipple:!w,disabled:g,tabIndex:null,role:void 0,onFocus:A,onBlur:j,ownerState:O,ref:a,...q,children:[o.jsx(ye,{autoFocus:s,checked:i,defaultChecked:c,className:K.input,disabled:g,id:te?u:void 0,name:N,onChange:y,readOnly:D,ref:X,required:$,ownerState:O,tabIndex:I,type:v,...v==="checkbox"&&P===void 0?{}:{value:P},...k}),S?l:r]})});function Se(e){return W("MuiFormControlLabel",e)}const M=G("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),$e=e=>{const{classes:t,disabled:a,labelPlacement:s,error:i,required:l}=e,d={root:["root",a&&"disabled",`labelPlacement${x(s)}`,i&&"error",l&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",i&&"error"]};return H(d,Se,t)},je=C("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${M.label}`]:t.label},t.root,t[`labelPlacement${x(a.labelPlacement)}`]]}})(R(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${M.disabled}`]:{cursor:"default"},[`& .${M.label}`]:{[`&.${M.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Be=C("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(R(({theme:e})=>({[`&.${M.error}`]:{color:(e.vars||e).palette.error.main}}))),Re=h.forwardRef(function(t,a){const s=ee({props:t,name:"MuiFormControlLabel"}),{checked:i,className:l,componentsProps:d={},control:c,disabled:m,disableTypography:w,inputRef:p,label:r,labelPlacement:u="end",name:k,onChange:X,required:N,slots:z={},slotProps:L={},value:U,...D}=s,$=Z(),I=m??c.props.disabled??($==null?void 0:$.disabled),v=N??c.props.required,P={disabled:I,required:v};["checked","name","onChange","value","inputRef"].forEach(g=>{typeof c.props[g]>"u"&&typeof s[g]<"u"&&(P[g]=s[g])});const q=se({props:s,muiFormControl:$,states:["error"]}),S={...s,disabled:I,labelPlacement:u,required:v,error:q.error},F=$e(S),f={slots:z,slotProps:{...d,...L}},[A,j]=be("typography",{elementType:_,externalForwardedProps:f,ownerState:S});let y=r;return y!=null&&y.type!==_&&!w&&(y=o.jsx(A,{component:"span",...j,className:E(F.label,j==null?void 0:j.className),children:y})),o.jsxs(je,{className:E(F.root,l),ownerState:S,ref:a,...D,children:[h.cloneElement(c,P),v?o.jsxs("div",{children:[y,o.jsxs(Be,{ownerState:S,"aria-hidden":!0,className:F.asterisk,children:["â€‰","*"]})]}):y]})});function Pe(e){return W("MuiSwitch",e)}const n=G("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Fe=e=>{const{classes:t,edge:a,size:s,color:i,checked:l,disabled:d}=e,c={root:["root",a&&`edge${x(a)}`,`size${x(s)}`],switchBase:["switchBase",`color${x(i)}`,l&&"checked",d&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},m=H(c,Pe,t);return{...t,...m}},Me=C("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${x(a.edge)}`],t[`size${x(a.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${n.thumb}`]:{width:16,height:16},[`& .${n.switchBase}`]:{padding:4,[`&.${n.checked}`]:{transform:"translateX(16px)"}}}}]}),ze=C(Ce,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${n.input}`]:t.input},a.color!=="default"&&t[`color${x(a.color)}`]]}})(R(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${n.checked}`]:{transform:"translateX(20px)"},[`&.${n.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${n.checked} + .${n.track}`]:{opacity:.5},[`&.${n.disabled} + .${n.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${n.input}`]:{left:"-100%",width:"300%"}})),R(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:J(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(ie(["light"])).map(([t])=>({props:{color:t},style:{[`&.${n.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:J(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${n.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?ne(e.palette[t].main,.62):le(e.palette[t].main,.55)}`}},[`&.${n.checked} + .${n.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),Le=C("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(R(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),Ie=C("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(R(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Te=h.forwardRef(function(t,a){const s=ee({props:t,name:"MuiSwitch"}),{className:i,color:l="primary",edge:d=!1,size:c="medium",sx:m,...w}=s,p={...s,color:l,edge:d,size:c},r=Fe(p),u=o.jsx(Ie,{className:r.thumb,ownerState:p});return o.jsxs(Me,{className:E(r.root,i),sx:m,ownerState:p,children:[o.jsx(ze,{type:"checkbox",icon:u,checkedIcon:u,ref:a,ownerState:p,...w,classes:{...r,root:r.switchBase}}),o.jsx(Le,{className:r.track,ownerState:p})]})});function et(){const{t:e}=ce(),[t,a]=h.useState(""),[s,i]=h.useState(""),[l,d]=h.useState(!0),[c,m]=h.useState(!1),[w,p]=h.useState(!1);return h.useEffect(()=>{var r;document.title=`${e("title")} - ${e("pages.markdown-editor")}`,(r=document.querySelector('meta[name="description"]'))==null||r.setAttribute("content",e("description.markdown-editor"))},[e]),h.useEffect(()=>{l&&i(t)},[t]),o.jsxs(B,{sx:{width:"100%",height:{md:"100%"},padding:2,gap:2,display:"flex",flexDirection:"row",flexWrap:"wrap"},children:[o.jsxs(B,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[o.jsxs(B,{display:"flex",gap:2,children:[o.jsxs(T,{variant:"contained",component:"label",children:[e("common.open"),o.jsx("input",{type:"file",accept:".md",style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1},onChange:async r=>{if(r.target.files&&r.target.files.length>0){const u=r.target.files[0];a(await u.text()),r.target.value=""}}})]}),o.jsx(T,{variant:"contained",onClick:()=>{const r=new Blob([t],{type:"text/plain"}),u=URL.createObjectURL(r),k=document.createElement("a");k.href=u,k.download="file.md",document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(u)},children:e("common.save")}),o.jsx(B,{flexGrow:1}),o.jsx(Re,{label:e("markdown-editor.auto-refresh"),control:o.jsx(Q,{arrow:!0,title:e("markdown-editor.lag-warning"),children:o.jsx(Te,{checked:l,onChange:r=>d(r.target.checked)})})})]}),o.jsxs(Y,{severity:"info",children:[" ",e("markdown-editor.edit")," "]}),o.jsx(ge,{language:"markdown",sx:{position:"relative",width:"100%",overflow:"auto",flexGrow:1,flexShrink:1},text:t,onChange:r=>a(r)})]}),o.jsxs(B,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[o.jsxs(B,{display:"flex",gap:2,children:[o.jsx(T,{variant:"contained",onClick:()=>{i(t)},children:e("common.refresh")}),o.jsx(T,{disabled:typeof window.print!="function",variant:"contained",startIcon:w&&o.jsx(xe,{size:"16px",color:"inherit"}),onClick:()=>{const r=document.getElementById("iframe-to-export");p(!0),ue(s,r).finally(()=>{p(!1)})},children:e("common.export")}),o.jsx(Q,{arrow:!0,title:e("markdown-editor.info"),children:o.jsx(de,{onClick:()=>m(!0),children:o.jsx(me,{})})})]}),o.jsxs(Y,{severity:"info",children:[" ",e("markdown-editor.preview")," "]}),o.jsx(pe,{sx:{flexGrow:1,flexShrink:1,flexBasis:1,paddingX:1,minWidth:"200px",whiteSpace:"wrap",overflow:{lg:"auto"}},square:!0,children:o.jsx(he,{text:s,sx:{overflow:"auto"}})})]}),o.jsx("iframe",{id:"iframe-to-export",style:{display:"none"}}),o.jsx(fe,{open:c,severity:"info",onClose:()=>m(!1),title:e("common.notice"),content:e("markdown-editor.info")})]})}export{et as default};
