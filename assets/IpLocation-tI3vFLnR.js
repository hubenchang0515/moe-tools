var _=Object.defineProperty;var g=(s,a,c)=>a in s?_(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c;var d=(s,a,c)=>g(s,typeof a!="symbol"?a+"":a,c);import{u as w,r,j as t,k as S,P as T,T as b}from"./index-DaGj_kTK.js";import{C as $}from"./Container-D9i_BQoA.js";import{S as m}from"./Stack-DaRcu475.js";import{T as C}from"./TextField-NKYQZ3Ai.js";import{T as I,a as A,b as D,c as x,d as n,e as E}from"./TableRow-CwFXqpSt.js";import{C as p}from"./CircularProgress-Rk8nTB2u.js";import"./useThemeProps-JxI2aYIG.js";import"./useSlot-BUL3zxkY.js";import"./Modal-B5dpoUkF.js";const o=()=>({ip:"-",country:"-",city:"-",lonlat:"-",isp:"-"}),P=(s,a)=>`${s>=0?s:-s}${s>=0?"E":"W"}, ${a>=0?a:-a}${a>=0?"N":"S"}`;class l{constructor(){d(this,"m_status");d(this,"m_data");this.m_status="loading",this.m_data=o()}status(){return this.m_status}data(){return this.m_data}}class k extends l{api(){return"api.vore.top"}async fetchData(a){try{this.m_status="loading";const e=await(await fetch(`https://api.vore.top/api/IPdata?ip=${a}`)).json();this.m_data={...o(),ip:e.ipinfo.text,city:e.ipdata.info2,isp:e.ipdata.isp},this.m_status="success"}catch{this.m_status="failed",this.m_data=o()}}}class v extends l{api(){return"api.ip.sb"}async fetchData(a){try{this.m_status="loading";const e=await(await fetch(`https://api.ip.sb/geoip/${a}`)).json();this.m_data={...o(),ip:e.ip,country:e.country,isp:e.isp},this.m_status="success"}catch{this.m_status="failed",this.m_data=o()}}}class z extends l{api(){return"api.iplocation.net"}async fetchData(a){try{this.m_status="loading",a||(a=(await(await fetch("https://api.iplocation.net/?cmd=get-ip")).json()).ip);const e=await(await fetch(`https://api.iplocation.net/?ip=${a}`)).json();this.m_data={...o(),ip:e.ip,country:e.country_name,isp:e.isp},this.m_status="success"}catch{this.m_status="failed",this.m_data=o()}}}class R extends l{api(){return"ip-api.com"}async fetchData(a){try{this.m_status="loading";const e=await(await fetch(`http://ip-api.com/json/${a}`)).json();this.m_data={...o(),ip:e.query,country:e.country,city:e.city,isp:e.isp,lonlat:P(e.lon,e.lat)},this.m_status="success"}catch{this.m_status="failed",this.m_data=o()}}}const j=[new k,new v,new z,new R];function M(){const{t:s}=w(),[a,c]=r.useState(""),[e,h]=r.useState(""),[u,f]=r.useState(j);return r.useEffect(()=>{var i;document.title=`${s("title")} - ${s("pages.ip-location")}`,(i=document.querySelector('meta[name="description"]'))==null||i.setAttribute("content",s("description.ip-location"))},[s]),r.useEffect(()=>{for(const i of u)i.fetchData(e).then(()=>{f([...j])})},[e]),t.jsx($,{maxWidth:"xl",sx:{my:2},children:t.jsxs(m,{spacing:2,children:[t.jsxs(m,{direction:"row",spacing:2,children:[t.jsx(C,{label:"IP",value:a,onChange:i=>c(i.target.value),onKeyDown:i=>{i.key==="Enter"&&a&&h(a)}}),t.jsx(S,{variant:"contained",onClick:()=>h(a),children:s("ip-location.query")})]}),t.jsx(I,{component:T,children:t.jsxs(A,{children:[t.jsx(D,{children:t.jsxs(x,{children:[t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.api")})}),t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.ip")})}),t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.country")})}),t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.city")})}),t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.lonlat")})}),t.jsx(n,{sx:{whiteSpace:"nowrap"},children:t.jsx("strong",{children:s("ip-location.isp")})})]})}),t.jsx(E,{children:u.map((i,y)=>t.jsxs(x,{children:[t.jsx(n,{children:t.jsx(b,{color:i.status()==="success"?"success":i.status()==="failed"?"error":"inherit",children:i.api()})}),t.jsx(n,{children:i.status()==="loading"?t.jsx(p,{size:"1em"}):i.data().ip}),t.jsx(n,{children:i.status()==="loading"?t.jsx(p,{size:"1em"}):i.data().country}),t.jsx(n,{children:i.status()==="loading"?t.jsx(p,{size:"1em"}):i.data().city}),t.jsx(n,{children:i.status()==="loading"?t.jsx(p,{size:"1em"}):i.data().lonlat}),t.jsx(n,{children:i.status()==="loading"?t.jsx(p,{size:"1em"}):i.data().isp})]},y))})]})})]})})}export{M as default};
