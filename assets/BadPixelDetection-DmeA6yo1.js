import{ab as m,r as a,j as c,u as x,B as h,k as F}from"./index-DE7DUhno.js";import{C as w}from"./Container-Bki0USQV.js";import{A as g}from"./Alert-CvVuyWRw.js";import"./useThemeProps-C_KQI25c.js";import"./useSlot-BhSgMeVR.js";import"./Close-DEFrdPvo.js";function v(e,s){const n=a.useRef(null);return a.useImperativeHandle(s,()=>n.current),a.useEffect(()=>{const r=()=>{var o,i;n.current&&(document.fullscreenElement===n.current?(n.current.width=window.innerWidth,n.current.height=window.innerHeight,n.current.style.cursor="none"):(n.current.width=((o=n.current.parentElement)==null?void 0:o.offsetWidth)||0,n.current.height=((i=n.current.parentElement)==null?void 0:i.offsetHeight)||0,n.current.style.cursor="auto"))};return r(),document.addEventListener("fullscreenchange",r),window.addEventListener("resize",r),()=>{document.removeEventListener("fullscreenchange",r),window.removeEventListener("resize",r)}},[n.current]),a.useEffect(()=>{var i;if(!n.current)return;let r=!1;(i=e.onLoad)==null||i.call(e,n.current);const o=()=>{var u,t;r||(n.current&&((u=e.onDraw)==null||u.call(e,n.current),(t=e.onUpdate)==null||t.call(e,n.current)),window.requestAnimationFrame(o))};return o(),()=>{r=!0}},[e.onLoad,e.onDraw,e.onUpdate,n.current]),c.jsx("canvas",{tabIndex:0,ref:n,width:0,height:0,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onClick:e.onClick,onContextMenu:r=>{r.preventDefault()},style:{position:"absolute",outline:"none"}})}const y=m.forwardRef(v);function K(){const{t:e}=x(),s=a.useRef(null);a.useEffect(()=>{var t;document.title=`${e("title")} - ${e("pages.bad-pixel-detection")}`,(t=document.querySelector('meta[name="description"]'))==null||t.setAttribute("content",e("description.bad-pixel-detection"))},[e]);const n=()=>{let t=0;const f=["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFFFFF","#000000"];return{onLoad:()=>{t=0},onDraw:l=>{const d=l.getContext("2d");d&&(d.fillStyle=f[t],d.fillRect(0,0,l.width,l.height))},onUpdate:()=>{},onInput:()=>{t=(t+1)%f.length}}},{onLoad:r,onDraw:o,onUpdate:i,onInput:u}=n();return c.jsx(w,{maxWidth:"xl",sx:{py:2,height:"100%"},children:c.jsxs(h,{height:"100%",display:"flex",flexDirection:"column",gap:2,children:[c.jsx(h,{flexGrow:1,children:c.jsx(y,{ref:s,onLoad:r,onDraw:o,onUpdate:i,onClick:u,onKeyDown:u})}),c.jsx(F,{variant:"contained",onClick:()=>{var t;(t=s.current)==null||t.requestFullscreen()},children:"开始检测"}),c.jsx(g,{severity:"info",children:e("bad-pixel-detection.message")})]})})}export{K as default};
