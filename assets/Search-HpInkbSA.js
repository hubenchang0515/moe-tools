import{u as j,a as g,b as w,r as y,R as k,j as e,T as d,B as v,D as C}from"./index-BsZ_TQp7.js";import{A as h}from"./AppCard-CRSKjoNY.js";import{C as S}from"./Container-BMiYmQnv.js";import{S as x}from"./Stack-DEq9nkAG.js";import{C as b}from"./Chip-pP7uqaby.js";import{G as i}from"./Grid2-fgW5QYTe.js";import"./useThemeProps-D3h_JKZ2.js";function z(){var l;const{t:r}=j(),u=g(),c=new URLSearchParams(u.search).get("text")??"",o=Array.from(new Set(c.toLowerCase().split(/[,，;；\s]+/))),p=w();y.useEffect(()=>{var s;document.title=`${r("title")} - ${r("pages.search")}`,(s=document.querySelector('meta[name="description"]'))==null||s.setAttribute("content",r("description.base"))},[r]),c.trim()===""&&p({pathname:"/"});const m=[];for(const s of k){const a={name:s.name,apps:[]};for(const t of s.apps)for(const n of o)if((l=t.keywords)!=null&&l.includes(n)){a.apps.push(t);break}a.apps.length>0&&m.push(a)}let f=0;return e.jsx(S,{maxWidth:"xl",sx:{marginY:2},children:e.jsxs(x,{spacing:2,children:[e.jsx(d,{variant:"overline",children:r("search.keywords")}),e.jsx(v,{display:"flex",gap:1,flexWrap:"wrap",children:o.map((s,a)=>e.jsx(b,{label:s,onDelete:()=>{const t=[...o];t.splice(a,1);const n=t.join(",");p({pathname:"/search",search:`?text=${n}`})}},a))}),m.map((s,a)=>e.jsxs(x,{spacing:2,children:[e.jsx(d,{variant:"h6",children:r(s.name)}),e.jsx(C,{}),e.jsx(i,{container:!0,spacing:2,children:s.apps.map((t,n)=>e.jsx(i,{size:{xs:12,md:6,lg:3},children:e.jsx(h,{name:r(t.name),url:t.url,image:`https://www.dmoe.cc/random.php?key=${f++}`},n)},n))})]},a)),e.jsx(i,{size:{xs:12,md:6,lg:3},style:{visibility:"hidden"},children:e.jsx(h,{name:"",url:"",image:""})})]})})}export{z as default};
