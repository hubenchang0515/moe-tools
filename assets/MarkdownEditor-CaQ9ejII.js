import{u as y,r,j as e,B as n,y as l,p as w,I as b,P as C}from"./index-C9DZtc18.js";import{p as S,M as B}from"./Markdown-CqM1U_Iq.js";import{H as E}from"./Help-H-w5l_Am.js";import{M as L}from"./MessageBox-C6ExmKb8.js";import{H as R,h as M}from"./html2canvas.esm-BxWhkxhf.js";import{F as U,S as I}from"./Switch-DcFJ3tmG.js";import{A as g}from"./Alert-Bq4LsUFJ.js";import{C as O}from"./CircularProgress-DnWZyNS3.js";import"./index-Csa-nKfc.js";import"./Chip-15ul4-Dj.js";import"./Link-DPu81BmV.js";import"./TableRow-BI0Re9dX.js";import"./Dialog-DDW25cFe.js";import"./Modal-DT0qXqln.js";import"./useSlot-d0PA4IBO.js";import"./AlertTitle-C7ZP9s_0.js";import"./Close-DC4aAZuJ.js";function Y(){const{t:o}=y(),[s,c]=r.useState(""),[m,p]=r.useState(""),[f,j]=r.useState(!0),[k,x]=r.useState(!1),[v,h]=r.useState(!1);return r.useEffect(()=>{var t;document.title=`${o("title")} - ${o("pages.markdown-editor")}`,(t=document.querySelector('meta[name="description"]'))==null||t.setAttribute("content",o("description.markdown-editor"))},[o]),r.useEffect(()=>{f&&p(s)},[s]),e.jsxs(n,{sx:{width:"100%",height:{md:"100%"},padding:2,gap:2,display:"flex",flexDirection:"row",flexWrap:"wrap"},children:[e.jsxs(n,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[e.jsxs(n,{display:"flex",gap:2,children:[e.jsxs(l,{variant:"contained",component:"label",children:[o("common.open"),e.jsx("input",{type:"file",accept:".md",style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1},onChange:async t=>{if(t.target.files&&t.target.files.length>0){const a=t.target.files[0];c(await a.text()),t.target.value=""}}})]}),e.jsx(l,{variant:"contained",onClick:()=>{const t=new Blob([s],{type:"text/plain"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="file.md",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},children:o("common.save")}),e.jsx(n,{flexGrow:1}),e.jsx(U,{label:o("markdown-editor.auto-refresh"),control:e.jsx(w,{arrow:!0,title:o("markdown-editor.lag-warning"),children:e.jsx(I,{checked:f,onChange:t=>j(t.target.checked)})})})]}),e.jsxs(g,{severity:"info",children:[" ",o("markdown-editor.edit")," "]}),e.jsx(R,{language:"markdown",sx:{position:"relative",width:"100%",overflow:"auto",flexGrow:1,flexShrink:1},text:s,onChange:t=>c(t)})]}),e.jsxs(n,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[e.jsxs(n,{display:"flex",gap:2,children:[e.jsx(l,{variant:"contained",onClick:()=>{p(s)},children:o("common.refresh")}),e.jsx(l,{variant:"contained",onClick:()=>{const t=document.getElementById("preview");t.classList.add("html2canvas-div"),M(t,{backgroundColor:"#fff"}).then(a=>{a.toBlob(i=>{if(!i)return;const u=URL.createObjectURL(i),d=document.createElement("a");d.href=u,d.download="markdown-image.png",d.click(),URL.revokeObjectURL(u),t.classList.remove("html2canvas-div")},"image/png")})},children:o("png")}),e.jsx(l,{disabled:typeof window.print!="function",variant:"contained",startIcon:v&&e.jsx(O,{size:"16px",color:"inherit"}),onClick:()=>{const t=document.getElementById("iframe-to-export");h(!0),S(m,t).finally(()=>{h(!1)})},children:o("pdf")}),e.jsx(w,{arrow:!0,title:o("markdown-editor.info"),children:e.jsx(b,{onClick:()=>x(!0),children:e.jsx(E,{})})})]}),e.jsxs(g,{severity:"info",children:[" ",o("markdown-editor.preview")," "]}),e.jsx(C,{sx:{flexGrow:1,flexShrink:1,flexBasis:1,paddingX:1,minWidth:"200px",whiteSpace:"wrap",overflow:{lg:"auto"}},square:!0,children:e.jsx(n,{id:"preview",children:e.jsx(B,{text:m,sx:{overflow:"auto"}})})})]}),e.jsx("iframe",{id:"iframe-to-export",style:{display:"none"}}),e.jsx(L,{open:k,severity:"info",onClose:()=>x(!1),title:o("common.notice"),content:o("markdown-editor.info")})]})}export{Y as default};
