import{ai as m,r as a,j as s,B as v}from"./index-DRfQ_5pu.js";import{H as c}from"./index-UY028nF4.js";function b(){return c.listLanguages()}function S(t,i){const e=a.useRef(null),l=a.useRef(null),[g,f]=a.useState(" ");a.useImperativeHandle(i,()=>l.current);const h=r=>{const n=c.highlight(r,{language:t.language,ignoreIllegals:!0});f(n.value)},o=()=>{var n;if(!e.current)return;const r=e.current.value;(n=t.onChange)==null||n.call(t,r),h(r)},d=r=>{if(r.key==="Tab"){if(!e.current)return;r.preventDefault();const n=e.current.selectionStart,x=e.current.selectionEnd;e.current.value=e.current.value.substring(0,n)+"    "+e.current.value.substring(x),e.current.selectionStart=n+4,e.current.selectionEnd=n+4,o();return}};a.useEffect(()=>{t.text&&e.current&&(e.current.value=t.text,o())},[t.text]),a.useEffect(()=>{o()},[t.language]);const u={margin:0,padding:12,overflow:"auto",fontFamily:"monospace",fontSize:"16px",lineHeight:"normal",letterSpacing:"normal",wordSpacing:"normal"};return s.jsxs(v,{className:`language-${t.language} hljs`,sx:t.sx??{position:"relative",width:"100%",overflow:"auto"},children:[s.jsx("div",{ref:l,className:`language-${t.language} hljs`,style:{...u,width:"100%",height:"100%",zIndex:1},children:s.jsx("pre",{style:{margin:0,padding:0},dangerouslySetInnerHTML:{__html:g+" "}})}),s.jsx("textarea",{ref:e,style:{...u,position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2,color:"transparent",background:"transparent",caretColor:"#0f0",border:"none",outline:"none",resize:"none",whiteSpace:"pre",scrollbarGutter:"stable"},wrap:"soft",autoFocus:!0,onChange:o,onKeyDown:d,onScroll:()=>{l.current&&e.current&&(l.current.scrollTop=e.current.scrollTop,l.current.scrollLeft=e.current.scrollLeft)}})]})}const j=m.forwardRef(S);export{j as H,b as l};
