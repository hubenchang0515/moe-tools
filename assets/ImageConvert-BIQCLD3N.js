import{j as e,y as l,u as f,r as d,B as x,P as p}from"./index-A_5X2U-q.js";import{C as w}from"./Container-h6MMd5hF.js";import{T as b,a as C,b as k,c as u,d as r,e as R}from"./TableRow-6NT9AtWz.js";import"./useThemeProps-agrUCDK_.js";function y(i){return e.jsxs(l,{variant:"contained",component:"label",children:[i.children,e.jsx("input",{type:"file",style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1},onChange:i.onChange})]})}function E(){const{t:i}=f(),h=d.useRef(null),n=d.useRef(null),j=d.useCallback(a=>{if(!a.target.files||a.target.files.length==0)return;const o=a.target.files[0],s=URL.createObjectURL(o),t=new Image;h.current.src=s,t.src=s,t.onload=()=>{var m;if(!n.current)return;const g=(m=n.current)==null?void 0:m.getContext("2d");g&&(n.current.width=t.width,n.current.height=t.height,g.drawImage(t,0,0))}},[h,n]),c=d.useCallback(a=>()=>{n.current&&n.current.toBlob(o=>{if(!o)return;const s=URL.createObjectURL(o),t=document.createElement("a");t.href=s,t.download=`image.${a}`,t.click()},`image/${a}`,1)},[n]);return e.jsx(w,{maxWidth:"xl",sx:{height:"100%",paddingY:1},children:e.jsxs(x,{height:"100%",display:"flex",flexDirection:"column",gap:1,children:[e.jsx(x,{sx:{flex:1,display:"flex",overflow:"hidden",justifyContent:"center"},children:e.jsx("img",{ref:h,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),e.jsx(y,{onChange:j,children:i("common.open")}),e.jsx(b,{component:p,sx:{flexShrink:0},children:e.jsxs(C,{children:[e.jsx(k,{children:e.jsxs(u,{children:[e.jsx(r,{align:"center",children:"PNG(.png)"}),e.jsx(r,{align:"center",children:"JPEG(.jpg)"}),e.jsx(r,{align:"center",children:"WEBP(.webp)"}),e.jsx(r,{align:"center",children:"ICON(.ico)"})]})}),e.jsx(R,{children:e.jsxs(u,{children:[e.jsx(r,{align:"center",children:e.jsx(l,{variant:"text",onClick:c("png"),children:i("common.download")})}),e.jsx(r,{align:"center",children:e.jsx(l,{variant:"text",onClick:c("jpeg"),children:i("common.download")})}),e.jsx(r,{align:"center",children:e.jsx(l,{variant:"text",onClick:c("webp"),children:i("common.download")})}),e.jsx(r,{align:"center",children:e.jsx(l,{variant:"text",onClick:c("ico"),disabled:!0,children:i("common.download")})})]})})]})}),e.jsx(x,{sx:{display:"none"},children:e.jsx("canvas",{ref:n})})]})})}export{E as default};
