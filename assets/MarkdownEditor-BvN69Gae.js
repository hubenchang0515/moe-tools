import{u as k,r as i,j as e,B as r,y as l,p as h,I as y,P as b}from"./index-By5e5jYw.js";import{p as v,M as S}from"./Markdown-BK8_v4vo.js";import{H as C}from"./Help-mvPYx47H.js";import{M as B}from"./MessageBox-CXNpfAP4.js";import{H as E}from"./HighlightEditor-BQDtSqHG.js";import{F as M,S as R}from"./Switch-DExP69_Z.js";import{A as u}from"./Alert-CvqmlV9P.js";import{C as W}from"./CircularProgress-B7VsP4U9.js";import"./index-BY1ZtuQe.js";import"./Chip-DD-lX2sS.js";import"./Link-DPifyrCl.js";import"./TableRow-4Qb_SCHt.js";import"./Dialog-C3APNSY7.js";import"./Modal-FxyvzOqw.js";import"./useSlot-CC702PmW.js";import"./AlertTitle-C-qQqDat.js";import"./Close-CdllSd3V.js";function N(){const{t}=k(),[n,d]=i.useState(""),[c,p]=i.useState(""),[m,w]=i.useState(!0),[g,x]=i.useState(!1),[j,f]=i.useState(!1);return i.useEffect(()=>{var o;document.title=`${t("title")} - ${t("pages.markdown-editor")}`,(o=document.querySelector('meta[name="description"]'))==null||o.setAttribute("content",t("description.markdown-editor"))},[t]),i.useEffect(()=>{m&&p(n)},[n]),e.jsxs(r,{sx:{width:"100%",height:{md:"100%"},padding:2,gap:2,display:"flex",flexDirection:"row",flexWrap:"wrap"},children:[e.jsxs(r,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[e.jsxs(r,{display:"flex",gap:2,children:[e.jsxs(l,{variant:"contained",component:"label",children:[t("common.open"),e.jsx("input",{type:"file",accept:".md",style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1},onChange:async o=>{if(o.target.files&&o.target.files.length>0){const s=o.target.files[0];d(await s.text()),o.target.value=""}}})]}),e.jsx(l,{variant:"contained",onClick:()=>{const o=new Blob([n],{type:"text/plain"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download="file.md",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:t("common.save")}),e.jsx(r,{flexGrow:1}),e.jsx(M,{label:t("markdown-editor.auto-refresh"),control:e.jsx(h,{arrow:!0,title:t("markdown-editor.lag-warning"),children:e.jsx(R,{checked:m,onChange:o=>w(o.target.checked)})})})]}),e.jsxs(u,{severity:"info",children:[" ",t("markdown-editor.edit")," "]}),e.jsx(E,{language:"markdown",sx:{position:"relative",width:"100%",overflow:"auto",flexGrow:1,flexShrink:1},text:n,onChange:o=>d(o)})]}),e.jsxs(r,{sx:{minWidth:"300px",maxWidth:"100%",height:"100%",display:"flex",flexDirection:"column",gap:2,flexGrow:1,flexShrink:1,flexBasis:1},children:[e.jsxs(r,{display:"flex",gap:2,children:[e.jsx(l,{variant:"contained",onClick:()=>{p(n)},children:t("common.refresh")}),e.jsx(l,{disabled:typeof window.print!="function",variant:"contained",startIcon:j&&e.jsx(W,{size:"16px",color:"inherit"}),onClick:()=>{const o=document.getElementById("iframe-to-export");f(!0),v(c,o).finally(()=>{f(!1)})},children:t("common.export")}),e.jsx(h,{arrow:!0,title:t("markdown-editor.info"),children:e.jsx(y,{onClick:()=>x(!0),children:e.jsx(C,{})})})]}),e.jsxs(u,{severity:"info",children:[" ",t("markdown-editor.preview")," "]}),e.jsx(b,{sx:{flexGrow:1,flexShrink:1,flexBasis:1,paddingX:1,minWidth:"200px",whiteSpace:"wrap",overflow:{lg:"auto"}},square:!0,children:e.jsx(S,{text:c,sx:{overflow:"auto"}})})]}),e.jsx("iframe",{id:"iframe-to-export",style:{display:"none"}}),e.jsx(B,{open:g,severity:"info",onClose:()=>x(!1),title:t("common.notice"),content:t("markdown-editor.info")})]})}export{N as default};
