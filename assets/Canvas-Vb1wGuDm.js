import{ai as f,r as a,j as s}from"./index-hppoC6iV.js";function d(n,o){const e=a.useRef(null);return a.useImperativeHandle(o,()=>e.current),a.useEffect(()=>{var u;const t=()=>{var c,i;e.current&&(document.fullscreenElement===e.current?(e.current.width=window.innerWidth,e.current.height=window.innerHeight,e.current.style.cursor="none"):(e.current.width=((c=e.current.parentElement)==null?void 0:c.offsetWidth)||0,e.current.height=((i=e.current.parentElement)==null?void 0:i.offsetHeight)||0,e.current.style.cursor="auto"))};t(),document.addEventListener("fullscreenchange",t),window.addEventListener("resize",t);const r=new ResizeObserver(()=>{t()});return(u=e.current)!=null&&u.parentElement&&r.observe(e.current.parentElement),()=>{document.removeEventListener("fullscreenchange",t),window.removeEventListener("resize",t),r.disconnect()}},[e.current]),a.useEffect(()=>{var u;if(!e.current)return;let t=!1;(u=n.onLoad)==null||u.call(n,e.current);const r=()=>{var c,i;t||(e.current&&((c=n.onDraw)==null||c.call(n,e.current),(i=n.onUpdate)==null||i.call(n,e.current)),window.requestAnimationFrame(r))};return r(),()=>{t=!0}},[n.onLoad,n.onDraw,n.onUpdate,e.current]),s.jsx("canvas",{tabIndex:0,ref:e,width:0,height:0,onKeyDown:n.onKeyDown,onKeyUp:n.onKeyUp,onClick:n.onClick,onContextMenu:t=>{t.preventDefault()},style:{position:"absolute",outline:"none"}})}const w=f.forwardRef(d);export{w as C};
