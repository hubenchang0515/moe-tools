import{u as z,r as a,j as i,B as h,y as k,I as A}from"./index-Bqiko7dL.js";import{C as R}from"./Canvas-C80ebFRe.js";import{H as S}from"./Help-C7S7iygI.js";import{C as $}from"./Container-CpKVCvWU.js";import{C as u}from"./Chip-CmSgpVLm.js";import{A as B}from"./Alert-Cd_Zoaoq.js";import{A as E}from"./AlertTitle-DdRlzhDg.js";import"./useThemeProps-BzzPTHxj.js";import"./useSlot-CPBkj2j-.js";import"./Close-CJ-kDxQQ.js";function J(){const{t:n}=z(),p=a.useRef(null);a.useEffect(()=>{var t;document.title=`${n("title")} - ${n("pages.frame-rate-detection")}`,(t=document.querySelector('meta[name="description"]'))==null||t.setAttribute("content",n("description.frame-rate-detection"))},[n]);const x=()=>{let t=0;const s=24,o=24;return{draw:r=>{if(!r)return;const e=r.getContext("2d");if(e){e.fillStyle="#000000",e.fillRect(0,0,r.width,r.height),e.strokeStyle="#FFFFFF",e.beginPath();for(let l=1;l<o;l++)e.moveTo(r.width*l/o,0),e.lineTo(r.width*l/o,r.height);for(let l=1;l<s;l++)e.moveTo(0,r.height*l/s),e.lineTo(r.width,r.height*l/s);e.stroke(),e.fillStyle="#FFFFFF";const c=Math.floor(t/o),f=t%o;e.fillRect(r.width*f/o,r.height*c/s,r.width/o,r.height/s)}},update:()=>{t=(t+1)%(s*o)}}},{draw:w,update:F}=x(),g=a.useCallback(w,[]),j=a.useCallback(F,[]),[y,C]=a.useState(0),[T,b]=a.useState(0);return a.useEffect(()=>{let t=0,s=0,o=0,m=0,d=0;const r=e=>{t===0&&(t=e),o===0&&(o=e);const c=e-o;if(o=e,c>0&&c<100){m+=1,d+=c;const f=m*1e3/d;e-t>=1e3&&b(f)}if(s+=1,e-t>=1e3){const f=s*1e3/(e-t);t=e,s=0,C(f)}window.requestAnimationFrame(r)};r(0)},[]),i.jsx($,{maxWidth:"xl",sx:{py:2,height:"100%"},children:i.jsxs(h,{height:"100%",display:"flex",flexDirection:"column",gap:2,children:[i.jsx(h,{flexGrow:1,children:i.jsx(R,{ref:p,onDraw:g,onUpdate:j})}),i.jsx(k,{variant:"contained",onClick:()=>{var t;(t=p.current)==null||t.requestFullscreen()},children:n("common.fullscreen")}),i.jsxs(h,{display:"flex",gap:1,flexWrap:"wrap",alignItems:"center",children:[i.jsx(u,{label:`${n("frame-rate-detection.frame-rate")}: ${y.toFixed(2)} fps`,color:"primary"}),i.jsx(u,{label:`${n("frame-rate-detection.refresh-rate")}: ${T.toFixed(2)} Hz`,color:"primary"}),i.jsx(A,{href:"https://www.vsynctester.com/manual.html",target:"_blank",children:i.jsx(S,{})})]}),i.jsxs(B,{severity:"info",children:[i.jsx(E,{children:i.jsx("strong",{children:n("common.explain")})}),n("frame-rate-detection.message")]})]})})}export{J as default};
