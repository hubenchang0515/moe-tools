import{r as a,j as u,B as x}from"./index-Cv_cWu_z.js";import{H as c}from"./vs2015.min-B0zpXqTj.js";function v(){return c.listLanguages()}function b(t){const e=a.useRef(null),l=a.useRef(null),[i,g]=a.useState(" "),f=r=>{const n=c.highlight(r,{language:t.language,ignoreIllegals:!0});g(n.value)},o=()=>{var n;if(!e.current)return;const r=e.current.value;(n=t.onChange)==null||n.call(t,r),f(r)},h=r=>{if(r.key==="Tab"){if(!e.current)return;r.preventDefault();const n=e.current.selectionStart,d=e.current.selectionEnd;e.current.value=e.current.value.substring(0,n)+"    "+e.current.value.substring(d),e.current.selectionStart=n+4,e.current.selectionEnd=n+4,o();return}};a.useEffect(()=>{t.text&&e.current&&(e.current.value=t.text,o())},[t.text]),a.useEffect(()=>{o()},[t.language]);const s={margin:0,padding:12,overflow:"auto",fontFamily:"monospace",fontSize:"16px",lineHeight:"normal",letterSpacing:"normal",wordSpacing:"normal"};return u.jsxs(x,{className:`language-${t.language} hljs`,sx:t.sx??{position:"relative",width:"100%",overflow:"auto"},children:[u.jsx("div",{ref:l,className:`language-${t.language} hljs`,style:{...s,width:"100%",height:"100%",zIndex:1},children:u.jsx("pre",{style:{margin:0,padding:0},dangerouslySetInnerHTML:{__html:i+" "}})}),u.jsx("textarea",{ref:e,style:{...s,position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:2,color:"transparent",background:"transparent",caretColor:"#0f0",border:"none",resize:"none",whiteSpace:"nowrap",scrollbarGutter:"stable"},autoFocus:!0,onChange:o,onKeyDown:h,onScroll:()=>{l.current&&e.current&&(l.current.scrollTop=e.current.scrollTop,l.current.scrollLeft=e.current.scrollLeft)}})]})}export{b as H,v as l};
